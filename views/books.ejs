<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Student Portal</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Font Awesome -->
    <script
      src="https://kit.fontawesome.com/82c4b53bff.js"
      crossorigin="anonymous"
    ></script>

    <!-- (Optional) Use CSS or JS implementation -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"
      integrity="sha512-RXf+QSDCUQs5uwRKaDoXt55jygZZm2V++WUZduaU/Ui/9EGp3f/2KZVahFZBKGH0s774sd3HmrhUy+SgOFQLVQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <!-- Bootstrap CSS v5.0.2 -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <!-- Bootstrap JavaScript Libraries -->
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <nav class="navbar navbar-dark bg-dark navbar-expand">
      <div class="container-fluid">
        <div class="navbar-brand">Books</div>
      </div>
      <ul class="navbar-nav">
        <li class="nav-item">
          <a href="/student/home" class="nav-link mx-3">Home</a>
        </li>
      </ul>
    </nav>

    <form action="/student/books" method="post">
      <div class="container mt-5">
        <div class="row">
          <div class="input-group ">
            <input type="text" name="book" placeholder="Enter the name of the book" id="" class="form-control border-info shadow" required autocomplete="off" />
            <button class="btn-lg shadow btn-dark input-group-append">
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>
          </div>
        </div>
      </div>
    </form>
      
     <% if(jsonArray.length > 0){  %>
     <%   jsonArray.forEach((e) => {  %>
      <div class="container mt-4">
        <div class="card bg-dark text-light">
          <a href="<%= e.volumeInfo.previewLink %>" style="text-decoration: none;" >
          <button type="submit" class="btn-outline-secondary border border-dark">
            <div class="card-header">
              <div class="row">
                <% if(e.volumeInfo){ %>
                <div class="col-auto">
                      <% if(e.volumeInfo.imageLinks){ %>
                        <% if(e.volumeInfo.imageLinks.thumbnail ){ %>
                          <img src="<%= e.volumeInfo.imageLinks.thumbnail %>" alt="" class="d-flex img img-fluid card-img-top rounded" style="max-width: 150px; max-height: 150px" /> 
                        <% } %>
                      <% } %>
                    </div>
                <div class="col-auto">
                      <!-- Title -->
                      <p class="mx-auto d-flex h4"><%= e.volumeInfo.title %></p>
                      <!-- Authors -->
                      <p style="margin-top: 0;" class="d-flex">By 
                        <%  if(e.volumeInfo.authors){  %>
                            <% for(let i = 0; i < e.volumeInfo.authors.length - 1 ; i++){ %>
                              <%= e.volumeInfo.authors[i] + "," %>
                            <% } %>
                            <%= e.volumeInfo.authors[e.volumeInfo.authors.length - 1] + "." %>
                        <%  }  %>
                      </p>
                      <!-- Publication -->
                        <p class="mt-0 d-flex" >
                          <% if(e.volumeInfo.publisher){ %>
                            <%= "Publication: " + e.volumeInfo.publisher %>  
                          <% } %>
                        </p>
                        <!-- Page Count -->
                      <p class="d-flex"><%= "Page: " + e.volumeInfo.pageCount %></p>
                </div>
              </div>
                <% } %>
            </div>

            <div class="card-body m-0">
                  <!-- Description -->
                  <div class="row">
                    <div class="col-12 text-center d-flex">
                      <%  if(e.volumeInfo.description){  %>
                        <%= e.volumeInfo.description.substring(0,250) + "..." %>
                      <%  }  %>
                      <%  if(!e.volumeInfo.description){  %>
                        <%= "Description Not Found ..." %>
                      <% } %>
                  </div>
                </div>
              </div>

            </div>
          </a>
      </div>
     <%   })  %>
     <% }  %>
           
   <div class="mt-5"></div>

  </body>
</html>
